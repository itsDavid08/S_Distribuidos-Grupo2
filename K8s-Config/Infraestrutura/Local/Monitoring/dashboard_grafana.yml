---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-providers
  namespace: monitoring
data:
  dashboards.yaml: |
    apiVersion: 1
    providers:
      - name: 'default'
        orgId: 1
        folder: ''
        type: file
        disableDeletion: false
        editable: true
        options:
          path: /var/lib/grafana/dashboards

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards
  namespace: monitoring
data:
  main-dashboard.json: |
    {"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":56,"links":[],"panels":[{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":19,"panels":[],"title":"Visão Geral","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0}]}},"overrides":[]},"gridPos":{"h":6,"w":15,"x":0,"y":1},"id":36,"options":{"minVizHeight":75,"minVizWidth":75,"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"sizing":"auto"},"pluginVersion":"12.3.0","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"kube_deployment_status_replicas_available{namespace=\"grupo2\", deployment=\"produtor-deployment\"}","legendFormat":"Produtores","range":true,"refId":"A"},{"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","expr":"kube_deployment_status_replicas_available{namespace=\"grupo2\", deployment=\"consumidor-deployment\"}","hide":false,"instant":false,"legendFormat":"Consumidores","range":true,"refId":"B"},{"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","expr":"kube_deployment_status_replicas_available{namespace=\"grupo2\", deployment=\"api-deployment\"}","hide":false,"instant":false,"legendFormat":"API","range":true,"refId":"C"},{"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","expr":"kube_deployment_status_replicas_available{namespace=\"grupo2\", deployment=\"ui-deployment\"}","hide":false,"instant":false,"legendFormat":"UI","range":true,"refId":"D"}],"title":"mongodb_connections","type":"gauge"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"0":{"color":"dark-red","index":0,"text":"DOWN"},"1":{"color":"semi-dark-green","index":1,"text":"UP"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":6,"w":3,"x":15,"y":1},"id":15,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"text":{"valueSize":22},"textMode":"value_and_name","wideLayout":true},"pluginVersion":"12.3.0","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"up{job=\"rabbitmq-cluster\", namespace=\"rabbitmq-system\"}","legendFormat":"__auto","range":true,"refId":"A"}],"title":"RabbitMQ Status","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"0":{"color":"dark-red","index":0,"text":"Error"},"1":{"color":"semi-dark-green","index":1,"text":"OK"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":6,"w":3,"x":18,"y":1},"id":6,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"text":{"valueSize":22},"textMode":"value_and_name","wideLayout":true},"pluginVersion":"12.3.0","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"builder","expr":"api_db_connection_status","legendFormat":"__auto","range":true,"refId":"A"}],"title":"Estado API","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[{"options":{"0":{"color":"dark-red","index":0,"text":"DOWN"},"1":{"color":"green","index":1,"text":"UP"}},"type":"value"}],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":6,"w":3,"x":21,"y":1},"id":1,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"text":{"valueSize":22},"textMode":"value_and_name","wideLayout":true},"pluginVersion":"12.3.0","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"builder","expr":"mongodb_up","legendFormat":"__auto","range":true,"refId":"A"}],"title":"Estado da Base de Dados","type":"stat"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":7},"id":18,"panels":[],"title":"Fluxo de Dados","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"ops"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":8},"id":8,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.3.0","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"builder","expr":"rate(producer_messages_created_total[1m])","legendFormat":"__auto","range":true,"refId":"A"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"builder","expr":"rate(consumer_messages_processed_total[1m])","hide":false,"legendFormat":"__auto","range":true,"refId":"B"}],"title":"Produção vs Consumo","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"fixedColor":"dark-red","mode":"fixed"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":20,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":8},"id":9,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.3.0","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"builder","expr":"rabbitmq_detailed_queue_messages{queue=\"real_time_data\",vhost=\"/\"}","legendFormat":"__auto","range":true,"refId":"A"}],"title":"Lag(Mensagens em Espera)","type":"timeseries"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":16},"id":17,"panels":[],"title":"Latencia y Performance","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"s"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":17},"id":10,"options":{"legend":{"calcs":[],"displayMode":"table","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.3.0","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"builder","expr":"histogram_quantile(0.95, rate(consumer_message_processing_duration_seconds_bucket[5m]))","legendFormat":"Pior caso - 95%","range":true,"refId":"A"},{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"builder","expr":"rate(consumer_message_processing_duration_seconds_sum[1m]) / rate(consumer_message_processing_duration_seconds_count[1m])","hide":false,"legendFormat":"Media","range":true,"refId":"B"}],"title":"Latencia Consumer","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"custom":{"hideFrom":{"legend":false,"tooltip":false,"viz":false},"scaleDistribution":{"type":"linear"}}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":17},"id":11,"options":{"calculate":false,"cellGap":1,"color":{"exponent":0.5,"fill":"dark-orange","mode":"scheme","reverse":false,"scale":"exponential","scheme":"Oranges","steps":64},"exemplars":{"color":"rgba(255,0,255,0.7)"},"filterValues":{"le":1e-9},"legend":{"show":true},"rowsFrame":{"layout":"auto"},"tooltip":{"mode":"single","showColorScale":false,"yHistogram":false},"yAxis":{"axisPlacement":"hidden","reverse":false}},"pluginVersion":"12.3.0","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"builder","expr":"rate(api_request_duration_seconds_bucket[5m])","format":"time_series","legendFormat":"__auto","range":true,"refId":"A"}],"title":"Latência API","type":"heatmap"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":25},"id":16,"panels":[],"title":"Infraestrutura","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"ops"},"overrides":[]},"gridPos":{"h":8,"w":12,"x":0,"y":26},"id":12,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.3.0","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"rate(mongodb_op_counters_total{type=\"insert\", namespace=\"grupo2\"}[1m])","legendFormat":"Escrituras (Consumidor)","range":true,"refId":"A"},{"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","expr":"rate(mongodb_op_counters_total{type=\"query\", namespace=\"grupo2\"}[1m])","hide":false,"instant":false,"legendFormat":"Lecturas (API)","range":true,"refId":"B"}],"title":"mongodb_op_counters_total","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0}]}},"overrides":[]},"gridPos":{"h":8,"w":12,"x":12,"y":26},"id":13,"options":{"minVizHeight":75,"minVizWidth":75,"orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showThresholdLabels":false,"showThresholdMarkers":true,"sizing":"auto"},"pluginVersion":"12.3.0","targets":[{"datasource":{"type":"prometheus","uid":"${DS_PROMETHEUS}"},"editorMode":"code","expr":"mongodb_connections{state=\"current\", namespace=\"grupo2\"}","legendFormat":"Current","range":true,"refId":"A"},{"datasource":{"type":"prometheus","uid":"prometheus"},"editorMode":"code","expr":"mongodb_connections{state=\"available\", namespace=\"grupo2\"}","hide":false,"instant":false,"legendFormat":"Available","range":true,"refId":"B"}],"title":"mongodb_connections","type":"gauge"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":34},"id":5,"panels":[],"title":"Saturação Producer ","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":9,"x":0,"y":35},"id":20,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.3.0","targets":[{"editorMode":"code","expr":"sum(rate(container_cpu_usage_seconds_total{namespace=\"grupo2\", pod=~\"produtor-deployment.*\", container!=\"\", container!=\"POD\"}[5m])) by (pod)","legendFormat":"Produtor - {{pod}}","range":true,"refId":"A"}],"title":"CPU Usage","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"decmbytes"},"overrides":[]},"gridPos":{"h":8,"w":9,"x":9,"y":35},"id":24,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.3.0","targets":[{"editorMode":"code","expr":"sum(container_memory_working_set_bytes{namespace=\"grupo2\", pod=~\"produtor-deployment.*\", container=\"produtor\"}) by (pod) / 1024 / 1024","legendFormat":"Produtor - {{pod}}","range":true,"refId":"A"}],"title":"RAM Usage","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"% de um Core","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"percentage","steps":[{"color":"green","value":0}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":8,"w":6,"x":18,"y":35},"id":28,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"12.3.0","targets":[{"editorMode":"code","expr":"sum(rate(container_cpu_usage_seconds_total{namespace=\"grupo2\", pod=~\"produtor-deployment.*\", container!=\"POD\"}[5m])) * 100","legendFormat":"Produtor - {{pod}}","range":true,"refId":"A"}],"title":"CPU%","type":"stat"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":43},"id":4,"panels":[],"title":"Saturação Consumer","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":8,"w":9,"x":0,"y":44},"id":21,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.3.0","targets":[{"editorMode":"code","expr":"sum(rate(container_cpu_usage_seconds_total{namespace=\"grupo2\", pod=~\"consumidor-deployment.*\", container!=\"POD\"}[5m])) by (pod)","legendFormat":"Consumer - {{pod}}","range":true,"refId":"A"}],"title":"CPU Usage","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"decmbytes"},"overrides":[]},"gridPos":{"h":8,"w":9,"x":9,"y":44},"id":27,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.3.0","targets":[{"editorMode":"code","expr":"sum(container_memory_working_set_bytes{namespace=\"grupo2\", pod=~\"consumidor-deployment.*\", container=\"consumidor\"}) by (pod) / 1024 / 1024","legendFormat":"Consumer - {{pod}}","range":true,"refId":"A"}],"title":"RAM Usage","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"% de um Core","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"fieldMinMax":true,"mappings":[],"max":100,"min":0,"thresholds":{"mode":"percentage","steps":[{"color":"green","value":0}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":8,"w":6,"x":18,"y":44},"id":31,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"12.3.0","targets":[{"editorMode":"code","expr":"sum(rate(container_cpu_usage_seconds_total{namespace=\"grupo2\", pod=~\"consumidor-deployment.*\", container!=\"POD\"}[5m])) * 100","legendFormat":"Produtor - {{pod}}","range":true,"refId":"A"}],"title":"CPU%","type":"stat"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":52},"id":3,"panels":[],"title":"Saturação API","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":7,"w":9,"x":0,"y":53},"id":23,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.3.0","targets":[{"editorMode":"code","expr":"sum(rate(container_cpu_usage_seconds_total{namespace=\"grupo2\", pod=~\"api-deployment.*\", container!=\"POD\"}[5m])) by (pod)","legendFormat":"API - {{pod}}","range":true,"refId":"A"}],"title":"CPU Usage","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"decmbytes"},"overrides":[]},"gridPos":{"h":7,"w":9,"x":9,"y":53},"id":26,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.3.0","targets":[{"editorMode":"code","expr":"sum(container_memory_working_set_bytes{namespace=\"grupo2\", pod=~\"api-deployment.*\", container=\"api\"}) by (pod) / 1024 / 1024","legendFormat":"API - {{pod}}","range":true,"refId":"A"}],"title":"RAM Usage","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"% de um Core","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"percentage","steps":[{"color":"green","value":0}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":7,"w":6,"x":18,"y":53},"id":30,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"12.3.0","targets":[{"editorMode":"code","expr":"sum(rate(container_cpu_usage_seconds_total{namespace=\"grupo2\", pod=~\"api-deployment.*\", container!=\"POD\"}[5m])) * 100","legendFormat":"Produtor - {{pod}}","range":true,"refId":"A"}],"title":"CPU%","type":"stat"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":60},"id":2,"panels":[],"title":"Saturação UI","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"short"},"overrides":[]},"gridPos":{"h":7,"w":9,"x":0,"y":61},"id":22,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.3.0","targets":[{"editorMode":"code","expr":"sum(rate(container_cpu_usage_seconds_total{namespace=\"grupo2\", pod=~\"ui-deployment.*\", container!=\"POD\"}[5m])) by (pod)","legendFormat":"UI - {{pod}}","range":true,"refId":"A"}],"title":"CPU Usage","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"barWidthFactor":0.6,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","showValues":false,"spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":0},{"color":"red","value":80}]},"unit":"decmbytes"},"overrides":[]},"gridPos":{"h":7,"w":9,"x":9,"y":61},"id":25,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"hideZeros":false,"mode":"single","sort":"none"}},"pluginVersion":"12.3.0","targets":[{"editorMode":"code","expr":"sum(container_memory_working_set_bytes{namespace=\"grupo2\", pod=~\"ui-deployment.*\", container=\"ui\"}) by (pod) / 1024 / 1024","legendFormat":"UI - {{pod}}","range":true,"refId":"A"}],"title":"RAM Usage","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"description":"% de um Core","fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"max":100,"min":0,"thresholds":{"mode":"percentage","steps":[{"color":"green","value":0}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":7,"w":6,"x":18,"y":61},"id":29,"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","percentChangeColorMode":"standard","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showPercentChange":false,"textMode":"auto","wideLayout":true},"pluginVersion":"12.3.0","targets":[{"editorMode":"code","expr":"sum(rate(container_cpu_usage_seconds_total{namespace=\"grupo2\", pod=~\"ui-deployment.*\", container!=\"POD\"}[5m])) * 100","legendFormat":"Produtor - {{pod}}","range":true,"refId":"A"}],"title":"CPU%","type":"stat"}],"preload":false,"refresh":"5s","schemaVersion":42,"tags":[],"templating":{"list":[]},"time":{"from":"now-5m","to":"now"},"timepicker":{},"timezone":"","title":"Dashoard_SistemasDistribuidos_Grupo2","uid":"e7679b02-a44b-4d79-8d9d-064af4866002","version":15}
